[//]: # (title: TeamCity Release Notes: Build 13000)
[//]: # (auxiliary-id: TeamCity Release Notes: Build 130000;TeamCity 2023.03 Release Notes)

__Build: ??????__

__01 January 2023__

### Bug

**[TW-80094](https://youtrack.jetbrains.com/issue/TW-80094/Warning-Could-not-delete-build-artifacts-upload-directory-in-teamcity-server.log)** — Warning "Could not delete build artifacts upload directory" in teamcity-server.log

**[TW-79966](https://youtrack.jetbrains.com/issue/TW-79966/UnsupportedOperationException-getProject-should-not-be-called-for-class)** — UnsupportedOperationException: 'getProject()' should not be called for class jetbrains.buildServer.serverSide.impl.persisting.projects.PersistTaskSerializer$1

**[TW-79563](https://youtrack.jetbrains.com/issue/TW-79563/Slack-notification-sign-in-doesnt-work-on-secondary-nodes)** — Slack notification: sign in doesn't work on secondary nodes

**[TW-77920](https://youtrack.jetbrains.com/issue/TW-77920/SQLIntegrityConstraintViolationException-on-attempt-to-change-project-visibility-on-the-secondary-node)** — SQLIntegrityConstraintViolationException on attempt to change project visibility on the secondary node

**[TW-79311](https://youtrack.jetbrains.com/issue/TW-79311/Could-not-generate-new-internal-id-for-external-id-error-on-an-attempt-to-copy-a-build-configuration-on-a-secondary-node)** — "Could not generate new internal id for external id" error on an attempt to copy a build configuration on a secondary node

**[TW-77324](https://youtrack.jetbrains.com/issue/TW-77324/Incorrect-error-message-when-specifying-an-unsupported-number-of-batches)** — Incorrect error message when specifying an unsupported number of batches

**[TW-78095](https://youtrack.jetbrains.com/issue/TW-78095/Return-the-field-BuildType.compatibleCloudImages)** — Return the field 'BuildType.compatibleCloudImages'

**[TW-79131](https://youtrack.jetbrains.com/issue/TW-79131/Build-may-be-not-stopped-properly-on-timeout-cannot-interrupt-artifact-publishing)** — Build may be not stopped properly on timeout (cannot interrupt artifact publishing)

**[TW-79662](https://youtrack.jetbrains.com/issue/TW-79662/An-unregistered-cloud-agent-is-not-recognised-as-a-cloud-one)** — An unregistered cloud agent is not recognised as a cloud one

**[TW-79905](https://youtrack.jetbrains.com/issue/TW-79905/It-is-not-possible-to-navigate-to-a-sub-section-of-Edit-project-menu)** — It is not possible to navigate to a sub-section of "Edit project" menu

**[TW-78839](https://youtrack.jetbrains.com/issue/TW-78839/Consider-changing-order-of-build-problems-and-changes-in-default-notification-template-for-failed-builds)** — Consider changing order of build problems and changes in default notification template for failed builds

**[TW-66824](https://youtrack.jetbrains.com/issue/TW-66824/Typo-in-Cloud-profile.-No-images-were-found-due-to-a-error.)** — Typo in Cloud profile. No images were found due to a error.

**[TW-78965](https://youtrack.jetbrains.com/issue/TW-78965/NoSuchElementException-in-TokenAuthenticationModelImpl)** — NoSuchElementException in TokenAuthenticationModelImpl

**[TW-74322](https://youtrack.jetbrains.com/issue/TW-74322/Agent-sidebar-is-scrolled-to-the-selected-item-when-I-expand-a-pool-or-in-image)** — Agent sidebar is scrolled to the selected item when I expand a pool or in image

**[TW-78111](https://youtrack.jetbrains.com/issue/TW-78111/Add-Show-changes-from-dependencies-checkbox-to-builds-Changes-tab)** — Add "Show changes from dependencies" checkbox to build's Changes tab

**[TW-78944](https://youtrack.jetbrains.com/issue/TW-78944/Cant-navigate-back-after-navigating-using-chain-icon)** — Can't navigate back after navigating using 'chain' icon

**[TW-78754](https://youtrack.jetbrains.com/issue/TW-78754/Pending-changes-tab-is-not-updated-if-the-opened-tab-was-inactive-for-some-time)** — Pending changes tab is not updated if the opened tab was inactive for some time

**[TW-78029](https://youtrack.jetbrains.com/issue/TW-78029/Personal-change-icon-is-not-highlighted-in-Sakura-for-changes-from-current-user)** — Personal change icon is not highlighted in Sakura for changes from current user

**[TW-77341](https://youtrack.jetbrains.com/issue/TW-77341/Build-status-is-not-being-refreshed-on-the-Tests-tab)** — Build status is not being refreshed on the Tests tab

**[TW-78502](https://youtrack.jetbrains.com/issue/TW-78502/Navigating-to-changes-or-agents-page-adds-two-Browser-history-entries)** — Navigating to /changes or /agents page adds two Browser history entries

**[TW-79092](https://youtrack.jetbrains.com/issue/TW-79092/Build-page-belonging-to-removed-build-configuration-hangs-in-infinite-loading-build-buildID)** — Build page belonging to removed build configuration hangs in infinite loading (/build/buildID)

**[TW-79464](https://youtrack.jetbrains.com/issue/TW-79464/Click-on-a-file-name-in-the-change-details-dialog-closes-it-but-does-not-open-the-diff-view)** — Click on a file name in the change details dialog closes it but does not open the diff view

**[TW-79284](https://youtrack.jetbrains.com/issue/TW-79284/Branch-on-a-build-configuration-page-defaults-to-All-branches-while-loading-causing-content-jump)** — Branch on a build configuration page defaults to &lt;All branches> while loading, causing content jump

**[TW-73246](https://youtrack.jetbrains.com/issue/TW-73246/On-the-build-overview-page-its-unclear-if-the-build-is-failed-or-failed-to-start)** — On the build overview page, it's unclear if the build is failed or failed to start

**[TW-78663](https://youtrack.jetbrains.com/issue/TW-78663/Build-Log-preview-on-the-Build-Overview-doesnt-parse-links)** — Build Log preview on the Build Overview doesn't parse links

**[TW-63554](https://youtrack.jetbrains.com/issue/TW-63554/Strange-looking-empty-Repositories-block-in-case-when-changes-are-not-yet-collected)** — Strange looking empty Repositories block in case when changes are not yet collected

**[TW-65058](https://youtrack.jetbrains.com/issue/TW-65058/Dynamically-show-Re-run-this-build-action-when-a-build-completes)** — Dynamically show "Re-run this build" action when a build completes

**[TW-79459](https://youtrack.jetbrains.com/issue/TW-79459/New-Build-Step-page-pressing-enter-button-reload-the-page-with)** — New Build Step page: pressing "enter" button reload the page with

**[TW-73571](https://youtrack.jetbrains.com/issue/TW-73571/New-UI-does-not-differ-Active-branches-and-Default-branch-with-regard-to-Pending-Changes-counters)** — New UI does not differ “Active branches” and “Default branch” with regard to Pending Changes counters

**[TW-79396](https://youtrack.jetbrains.com/issue/TW-79396/Infinite-loading-in-the-build-type-overview-tab-after-pagination)** — Infinite loading in the build type overview tab after pagination

**[TW-79479](https://youtrack.jetbrains.com/issue/TW-79479/JS-Plugins-are-crashing-if-content-is-an-empty-string)** — JS Plugins are crashing if content is an empty string

**[TW-78952](https://youtrack.jetbrains.com/issue/TW-78952/Confusing-message-Reused-N-build-from-previous-build-chains.-can-be-shown-for-the-first-chain)** — Confusing message "Reused N build from previous build chains." can be shown for the first chain

**[TW-78940](https://youtrack.jetbrains.com/issue/TW-78940/Incorrect-chart-will-be-shown-on-Build-Configuration-Page-Build-Chains-Tab-if-the-openned-build-was-reused)** — Incorrect chart will be shown on Build Configuration Page -> Build Chains Tab if the openned build was reused

**[TW-79081](https://youtrack.jetbrains.com/issue/TW-79081/Broken-layout-on-chains-list-date-is-overlapping-between-lines)** — Broken layout on chains list, date is overlapping between lines

**[TW-79336](https://youtrack.jetbrains.com/issue/TW-79336/Infinite-loader-on-build-page-in-an-archived-project)** — Infinite loader on build page in an archived project

**[TW-79304](https://youtrack.jetbrains.com/issue/TW-79304/Build-card-on-a-dependencies-timeline-has-weird-height-when-opened)** — Build 'card' on a dependencies timeline has weird height when opened

**[TW-79773](https://youtrack.jetbrains.com/issue/TW-79773/Build-is-marked-as-failed-when-TC-is-fail-to-login-to-an-optional-registry)** — Build is marked as failed when TC is fail to login to an optional registry

**[TW-79733](https://youtrack.jetbrains.com/issue/TW-79733/There-is-no-logging-with-a-reason-why-some-plugin-cannot-be-loaded-in-runtime)** — There is no logging with a reason why some plugin cannot be loaded in runtime

**[TW-79014](https://youtrack.jetbrains.com/issue/TW-79014/Edit-Artifact-Dependency-do-not-reset-the-branch-filter-when-a-new-configuration-is-selected)** — Edit Artifact Dependency: do not reset the branch filter when a new configuration is selected

**[TW-79358](https://youtrack.jetbrains.com/issue/TW-79358/Parallel-tests-feature-should-ignore-builds-with-timeout-problems-when-calculating-test-statistics)** — Parallel tests feature should ignore builds with timeout problems when calculating test statistics

**[TW-60872](https://youtrack.jetbrains.com/issue/TW-60872/Failed-to-enable-versioned-settings-for-a-project-with-a-meta-runner-if-meta-runner-with-the-same-id-already-exists-on-the)** — Failed to enable versioned settings for a project with a meta-runner if meta-runner with the same id already exists on the server

**[TW-79302](https://youtrack.jetbrains.com/issue/TW-79302/Add-a-timeout-for-LDAP-operations)** — Add a timeout for LDAP operations

**[TW-79335](https://youtrack.jetbrains.com/issue/TW-79335/Missing-Show-diff-between-expected-and-actual-values-for-the-test)** — Missing 'Show diff between expected and actual values' for the test

**[TW-79704](https://youtrack.jetbrains.com/issue/TW-79704/Test-filter-by-status-is-malfunctioning)** — Test filter by status is malfunctioning

**[TW-78828](https://youtrack.jetbrains.com/issue/TW-78828/Unable-to-collect-changes-due-to-Ref-is-no-longer-present-in-the-remote-repository)** — Unable to collect changes due to 'Ref is no longer present in the remote repository'

**[TW-78609](https://youtrack.jetbrains.com/issue/TW-78609/Secondary-node-Could-not-import-project-settings-from-VCS-for-unknown-reason-when-creating-a-project-from-.teamcity-settings)** — Secondary node: "Could not import project settings from VCS for unknown reason" when creating a project from .teamcity settings

**[TW-79020](https://youtrack.jetbrains.com/issue/TW-79020/Duplicate-row-exception-in-DBBuildHistory.addHistoryEntry)** — Duplicate row exception in DBBuildHistory.addHistoryEntry

**[TW-79515](https://youtrack.jetbrains.com/issue/TW-79515/Main-node-cant-take-an-exclusive-lock-if-there-is-a-sufficient-number-of-non-read-only-nodes)** — Main node can't take an exclusive lock if there is a sufficient number of non read only nodes

**[TW-79400](https://youtrack.jetbrains.com/issue/TW-79400/Build-hangs-for-12-hours-with-Error-downloading-patch-into-temporary-file...-Read-timed-out-error)** — Build hangs for 12 hours with 'Error downloading patch into temporary file:... Read timed out' error

**[TW-74177](https://youtrack.jetbrains.com/issue/TW-74177/Critical-error-in-configuration-of-archived-project-report-should-show-the-list-of-affected-projects)** — Critical error in configuration of archived project: report should show the list of affected projects

**[TW-79562](https://youtrack.jetbrains.com/issue/TW-79562/Confusing-error-Could-not-find-the-version-file-metadata-metadata-version.dat-in-the-backup-archive-when-structure-of-archive)** — Confusing error "Could not find the version file (metadata/metadata-version.dat) in the backup archive" when structure of archive with the backup is wrong

**[TW-78622](https://youtrack.jetbrains.com/issue/TW-78622/Create-project-from-URL-page-displays-required-DSL-context-parameters-in-random-order)** — Create project from URL page displays required DSL context parameters in random order

**[TW-79354](https://youtrack.jetbrains.com/issue/TW-79354/Mark-Bazel-plugin-as-secondary-node-aware)** — Mark Bazel plugin as secondary node aware

**[TW-79099](https://youtrack.jetbrains.com/issue/TW-79099/Remote-run-with-pending-file-marked-for-add-leaves-the-file-writable-on-the-agent)** — Remote run with pending file marked for add leaves the file writable on the agent

**[TW-79110](https://youtrack.jetbrains.com/issue/TW-79110/Set-English-language-for-native-git-explicitly)** — Set English language for native git explicitly

**[TW-78931](https://youtrack.jetbrains.com/issue/TW-78931/Ensure-agent-does-not-execute-beforeBuildFinish)** — Ensure agent does not execute `beforeBuildFinish`

**[TW-70985](https://youtrack.jetbrains.com/issue/TW-70985/Commit-Status-Publisher-cannot-parse-Git-Url-it-being-a-parameter)** — Commit Status Publisher : cannot parse Git Url (it being a parameter)

**[TW-79100](https://youtrack.jetbrains.com/issue/TW-79100/Token-popup-callback-doesnt-work-if-token-was-revoked)** — Token popup callback doesn't work if token was revoked

**[TW-79095](https://youtrack.jetbrains.com/issue/TW-79095/GitHub-connection-should-check-if-stored-token-has-all-required-scopes)** — GitHub connection should check if stored token has all required scopes

**[TW-79334](https://youtrack.jetbrains.com/issue/TW-79334/Invalid-field-name-Callback-URL)** — Invalid field name "Callback URL:"

**[TW-79077](https://youtrack.jetbrains.com/issue/TW-79077/Pull-Request-information-may-be-outdated-for-5-minutes)** — Pull Request information may be outdated for 5 minutes

**[TW-79207](https://youtrack.jetbrains.com/issue/TW-79207/Refresh-able-tokens-are-not-reliably-used-when-creating-VCS-roots)** — Refresh-able tokens are not reliably used when creating VCS roots

**[TW-79365](https://youtrack.jetbrains.com/issue/TW-79365/Commit-Status-Publisher-fails-to-publish-status-to-Azure-DevOps-pull-requests)** — Commit Status Publisher fails to publish status to Azure DevOps pull requests

**[TW-79229](https://youtrack.jetbrains.com/issue/TW-79229/Set-unique-Display-name-for-connection-in-Add-connection-Popup-by-default)** — Set unique Display name for connection in Add connection Popup by default

**[TW-79463](https://youtrack.jetbrains.com/issue/TW-79463/S3-interrupt-parallelized-multipart-upload-on-error)** — [S3] interrupt parallelized multipart upload on error

**[TW-79495](https://youtrack.jetbrains.com/issue/TW-79495/Fix-filters-parsing-for-dedicated-hosts)** — Fix filters parsing for dedicated hosts

**[TW-79234](https://youtrack.jetbrains.com/issue/TW-79234/Agent-type-is-updated-from-agent-without-plugins-and-runners)** — Agent type is updated from agent without plugins (and runners)

**[TW-76009](https://youtrack.jetbrains.com/issue/TW-76009/TeamCity-Kubernetes-integration-prefers-service-account-to-supplied-EKS-credentials)** — TeamCity Kubernetes integration prefers service account to supplied EKS credentials

**[TW-79117](https://youtrack.jetbrains.com/issue/TW-79117/Agent-does-not-recognize-docker-compose-installation)** — Agent does not recognize docker compose installation

**[TW-79589](https://youtrack.jetbrains.com/issue/TW-79589/Parameters-references-in-Docker-container-name-are-not-resolved)** — Parameters references in Docker container name are not resolved

**[TW-79202](https://youtrack.jetbrains.com/issue/TW-79202/Permission-issue-for-REST-API-endpoint-when-users-try-to-create-an-access-token)** — Permission issue for REST API endpoint when users try to create an access token


### Feature

**[TW-74127](https://youtrack.jetbrains.com/issue/TW-74127/Sakura-implement-Agent-Parameters-tab)** — Sakura: implement Agent Parameters tab

**[TW-74071](https://youtrack.jetbrains.com/issue/TW-74071/Build-parameters-tab-for-new-UI)** — Build parameters tab for new UI

**[TW-78596](https://youtrack.jetbrains.com/issue/TW-78596/Allow-detaching-project-from-all-pools.-Do-not-add-project-without-pools-to-Default)** — Allow detaching project from all pools. Do not add project without pools to Default

**[TW-76713](https://youtrack.jetbrains.com/issue/TW-76713/Implement-acquire-new-token-button-on-the-edit-VCS-root-settings-form-for-refreshable-token-authentication)** — Implement "acquire new token" button on the edit VCS root settings form for refreshable token authentication

**[TW-37456](https://youtrack.jetbrains.com/issue/TW-37456/Allow-OAuth-authentication-against-Stash-in-preference-to-storing-user-password-in-Commit-Status-Publisher)** — Allow OAuth authentication against Stash in preference to storing user/password in Commit Status Publisher

**[TW-24782](https://youtrack.jetbrains.com/issue/TW-24782/Execute-step-Only-if-build-status-is-failed)** — Execute step: Only if build status is failed

**[TW-48656](https://youtrack.jetbrains.com/issue/TW-48656/Use-OAuth-for-Build-Commit-Status-Publisher-Bitbucket-cloud)** — Use OAuth for Build Commit Status Publisher (Bitbucket cloud)

**[TW-78723](https://youtrack.jetbrains.com/issue/TW-78723/Allow-to-configure-build-failure-conditions-on-custom-statistics-values-in-DSL)** — Allow to configure build failure conditions on custom statistics values in DSL

**[TW-75678](https://youtrack.jetbrains.com/issue/TW-75678/Run-AWS-EC2-spot-instance-build-agents-using-a-spot-placement-score)** — Run AWS EC2 spot instance build agents using a spot placement score

**[TW-76416](https://youtrack.jetbrains.com/issue/TW-76416/Allow-specifying-multiple-subnets-and-instance-types-for-EC2-cloud-images)** — Allow specifying multiple subnets and instance types for EC2 cloud images

**[TW-70203](https://youtrack.jetbrains.com/issue/TW-70203/Add-an-ability-to-show-health-reports-for-archived-projects)** — Add an ability to show health reports for archived projects

**[TW-74121](https://youtrack.jetbrains.com/issue/TW-74121/Sakura-implement-Change-Log-tabs-on-build-type-level)** — Sakura: implement "Change Log" tabs on build type level

**[TW-74122](https://youtrack.jetbrains.com/issue/TW-74122/Sakura-implement-Change-Log-tab-on-project-level)** — Sakura: implement "Change Log" tab on project level

**[TW-74706](https://youtrack.jetbrains.com/issue/TW-74706/S3-Parallelise-multipart-upload)** — [S3] Parallelise multipart upload

**[TW-60821](https://youtrack.jetbrains.com/issue/TW-60821/Add-support-for-Bitbucket-Server-in-Project-Settings-Connections)** — Add support for Bitbucket Server in Project Settings -> Connections

**[TW-78767](https://youtrack.jetbrains.com/issue/TW-78767/Two-Factor-Authentication-allow-to-select-user-groups-for-members-of-which-2FA-will-be-mandatory.)** — Two-Factor Authentication: allow to select user groups, for members of which 2FA will be mandatory.

**[TW-78850](https://youtrack.jetbrains.com/issue/TW-78850/One-time-hints-to-highlight-non-discoverable-features)** — One-time hints to highlight non-discoverable features

**[TW-72327](https://youtrack.jetbrains.com/issue/TW-72327/Support-showing-Graph-on-Pending-changes-and-Changes-tabs)** — Support showing Graph on Pending changes and Changes tabs

**[TW-74019](https://youtrack.jetbrains.com/issue/TW-74019/Builds-history-can-be-lost-if-a-DSL-commit-changes-the-id-of-corresponding-build-configuration)** — Builds history can be lost if a DSL commit changes the id of corresponding build configuration

**[TW-70087](https://youtrack.jetbrains.com/issue/TW-70087/Make-it-possible-to-to-leave-the-project-in-the-Project-pool-only)** — Make it possible to to leave the project in the Project pool only

**[TW-77943](https://youtrack.jetbrains.com/issue/TW-77943/Report-image-pulling-as-separate-block-in-docker-wrapper)** — Report image pulling as separate block in docker wrapper

**[TW-42311](https://youtrack.jetbrains.com/issue/TW-42311/Add-ability-to-upload-per-project-SSH-keys-via-REST-API)** — Add ability to upload per-project SSH keys via REST API


### Performance Problem

**[TW-79599](https://youtrack.jetbrains.com/issue/TW-79599/Many-artefactUpload.html-requests-can-occupy-all-http-threads-and-make-server-appear-as-hanging)** — Many artefactUpload.html requests can occupy all http threads and make server appear as hanging

**[TW-45828](https://youtrack.jetbrains.com/issue/TW-45828/Slow-build-parameters-page-loading-30-seconds-rendering)** — Slow build parameters page loading (>30 seconds rendering)

**[TW-77040](https://youtrack.jetbrains.com/issue/TW-77040/Expanding-a-build-line-is-slow-in-the-recent-builds)** — Expanding a build line is slow in the recent builds

**[TW-79567](https://youtrack.jetbrains.com/issue/TW-79567/Performance-problem-during-startup-in-the-ProjectModelWrapper.putProjectInNewModel)** — Performance problem during startup in the ProjectModelWrapper.putProjectInNewModel

**[TW-79634](https://youtrack.jetbrains.com/issue/TW-79634/Collecting-changes-is-stuck-and-builds-are-not-starting-due-to-requests-to-Run-Custom-Build-dialog-runCustomBuild.html)** — Collecting changes is stuck and builds are not starting due to requests to Run Custom Build dialog (runCustomBuild.html)

**[TW-79568](https://youtrack.jetbrains.com/issue/TW-79568/Performance-problem-during-startup-in-ProjectCloudManagerImpl)** — Performance problem during startup in ProjectCloudManagerImpl

**[TW-79407](https://youtrack.jetbrains.com/issue/TW-79407/Agent-unable-to-do-anything-with-unable-to-create-native-thread-error)** — Agent unable to do anything with "unable to create native thread" error

**[TW-79451](https://youtrack.jetbrains.com/issue/TW-79451/Memory-leak-in-agent-part-of-Telemetry-plugin)** — Memory leak in agent part of Telemetry plugin

**[TW-59444](https://youtrack.jetbrains.com/issue/TW-59444/Slow-commit-hook-processing-slow-filtering-of-VCS-root-instances-due-to-parameters-resolution)** — Slow commit hook processing (slow filtering of VCS root instances due to parameters resolution)
